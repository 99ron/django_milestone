{% extends 'base.html' %} 
{% load static from staticfiles %} 
{% load bootstrap_tags %} 
{% block content %}

<div class="background-carbon-fibre">

    <div class="gallery-header-image">
        <div class="container">
            <h1 class="gallery-header-container-text"> | GALLERY & REVIEWS | </h1>
        </div>
    </div>

    <div class="header-box-shadow">

        <div class="container gallery-main-content">

        {% if reviews %}


        <div class="review-container">

            {% for review in reviews %}
            <div class="panel panel-group review-panel-container">

                <div class="panel panel-primary">

                    <div class="panel-heading"> {{ review.title }} </div>

                    <div class="panel-body">
                        <div class="col-xs-12 col-sm-4">
                            
                            {% for image in review.attachment.all %} 
                                {% if forloop.counter < 2 %} 
                                    <img src="{{ MEDIA_URL }}{{ image.file }}" class="img-responsive testimonial-image img-thumbnail" alt="Gallery Image">
                                {% endif %} 
                            {% endfor %}
                            
                        </div>

                        <div class="col-xs-12 col-sm-8 testimonial-text">
                            <p> <b>{{ review.username }}</b> rated this service a <b>{{ review.rating }} out of 5!</b></p>
                            <hr class="hr-break--full">
                            <p class="gallery-text"> {{ review.comment }}</p>
                            <a href="{% url 'review_more' review.pk %}" type="submit" class="btn btn-success pull-right"><i class="fas fa-book" aria-hidden="true"></i> Read More! </a>
                        </div>

                        <div class="">

                        </div>

                    </div>
                </div>
            </div>
            {% endfor %}

        </div>

        {% else %}

        <div class="col-xs-12 panel-group">

            <div class="panel panel-primary text-center gallery-container">
                <div class="gallery-nothing">
                    <p> There are currently no reviews to show you at this moment in time. <br> Please pop by again later!</p>
                </div>
            </div>

        </div>

        {% endif %}

        </div>
    </div>

    <div class="pagination-container">
        <!--This checks if there's more than 1 page worth of results  -->
        {% if reviews.has_other_pages %}

        <ul class="pagination">
            {% if reviews.has_previous %}
            <li><a href="?page={{ reviews.previous_page_number }}">&laquo;</a></li>
            {% else %}
            <li class="disabled"><span>&laquo;</span></li>
            {% endif %} {% for i in reviews.paginator.page_range %} {% if reviews.number == i %}
            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span>
            </li>
            {% else %}
            <li><a href="?page={{ i }}">{{ i }}</a></li>
            {% endif %} {% endfor %} {% if reviews.has_next %}
            <li><a href="?page={{ reviews.next_page_number }}">&raquo;</a></li>
            {% else %}
            <li class="disabled"><span>&raquo;</span></li>
            {% endif %}
        </ul>

        {% endif %}
    </div>
</div>

{% endblock %}
